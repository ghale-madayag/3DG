import{b as d,T as O,x as z,z as _,r as R,o as q,c as B,w as S,a as r,u as o,Z as A,e,l as y,y as V,n as w}from"./app-976f9ee5.js";import{L as E}from"./main-f512f018.js";import{P as F}from"./page-header-d0586ccd.js";import{$ as N,C as $,a as H}from"./ckeditor-83757462.js";import{s as p}from"./default-951051e0.js";import"./logo-dark-d94ba77b.js";import"./_plugin-vue_export-helper-c27b6911.js";const I=e("meta",{name:"viewport",content:"your content"},null,-1),W={class:"row"},Y={class:"col-lg-8"},G={class:"card"},Q={class:"card-body"},Z={class:"mb-3"},J=e("label",{class:"form-label",for:"name"},"Land Name",-1),K=e("div",{class:"invalid-feedback"},"The land name is required",-1),X={class:"mb-3"},ee=e("label",{class:"form-label",for:"description"},"Description",-1),le={class:"row"},se={class:"col-lg-4"},te={class:"mb-3 mb-lg-0"},oe=e("label",{for:"size",class:"form-label"},"Size / Sqm",-1),ae={class:"col-lg-4"},ie={class:"mb-3 mb-lg-0"},ne=e("label",{for:"groundbreaking",class:"form-label"},"Groundbreaking Date",-1),de={class:"card"},re=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Attached files")],-1),ce={class:"card-body"},ue=e("p",{class:"text-muted"},"Add Attached files here.",-1),me={class:"col-lg-4"},pe={class:"card"},ve=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Location Details")],-1),be={class:"card-body"},fe={class:"form-group"},_e=e("label",{class:"form-label"},"Region",-1),he={class:"form-group"},ge=e("label",{class:"form-label"},"Province",-1),ye={class:"form-group"},Ve=e("label",{class:"form-label"},"Municipality",-1),we={class:"form-group"},ke=e("label",{class:"form-label"},"Barangay",-1),xe={class:"mb-3"},ze=e("label",{for:"address",class:"form-label"},"Blk/Lot/Street/House No.",-1),Se={class:"card"},je=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Seller & Owner Details")],-1),De={class:"card-body"},Pe={class:"mb-3"},Le=e("label",{for:"seller",class:"form-label"},"Seller",-1),Te=e("div",{class:"invalid-feedback"},"The seller is required",-1),Ce={class:"mb-3"},Ue=e("label",{for:"owner",class:"form-label"},"Owner",-1),Me=e("div",{class:"invalid-feedback"},"The owner is required",-1),Oe=`
    <ul class="list-unstyled mb-0" id="dropzone-preview">
        <li class="mt-2" id="dropzone-preview-list">
            <!-- This is used as the file preview template -->
            <div class="border rounded">
                <div class="d-flex p-2">
                    <div class="flex-shrink-0 me-3">
                        <div class="avatar-sm rounded">
                            <img src="#" alt="Project-Image" data-dz-thumbnail class="img-fluid rounded d-block" />
                        </div>
                    </div>
                    <div class="flex-grow-1">
                        <div class="pt-1">
                            <h5 class="fs-14 mb-1" data-dz-name>&nbsp;</h5>
                            <p class="fs-13 text-muted mb-0" data-dz-size></p>
                            <strong class="error text-danger" data-dz-errormessage></strong>
                        </div>
                    </div>
                    <div class="flex-shrink-0 ms-3">
                        <button data-dz-remove class="btn btn-sm btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </li>
    </ul>
    `,$e={__name:"Create",props:{contacts:Object},setup(k){const j=H,D={toolbar:{items:["bold","italic","numberedList","bulletedList","indent","outdent","link","undo","redo"]}},b=d(null),f=d(null),v=d(null),u=d(null),m=d(null),h=d(null),g=d(null),x=d(null),c=d(null);let P=d(),a=O({name:null,description:null,size:null,ground_breaking:null,attachments:[],region:null,province:null,municipality:null,barangay:null,address:null,seller_id:null,owner_id:null});z(async()=>{try{const t=await fetch("/storage/address.json");if(!t.ok)throw new Error("Failed to fetch data");const s=await t.json(),i=Object.keys(s).map(l=>({value:s[l].region_name,label:s[l].region_name,province_list:s[l].province_list}));b.value=i}catch(t){console.error("Error fetching data:",t)}}),_(f,(t,s)=>{if(t!==null&&b.value!==null){L();const i=b.value.find(l=>l.value===t);if(a.region=t,i&&typeof i.province_list=="object"){const l=Object.keys(i.province_list).map(n=>({value:n,label:n,municipality_list:i.province_list[n]}));h.value=l}}}),_(v,(t,s)=>{if(t!==null){T();const i=h.value.find(l=>l.value===t);if(a.province=t,i&&typeof i.municipality_list=="object"){const l=Object.keys(i.municipality_list.municipality_list).map(n=>({value:n,label:n,barangay_list:i.municipality_list.municipality_list[n].barangay_list}));g.value=l}}}),_(u,(t,s)=>{if(t!==null){C();const i=g.value.find(l=>l.value===t);if(a.municipality=t,i&&(Object.values(i.barangay_list),typeof i.barangay_list=="object")){const l=i.barangay_list.map(n=>({value:n,label:n}));x.value=l}}}),_(m,(t,s)=>{t!==null&&(a.barangay=t)});const L=()=>{v.value=null,u.value=null,m.value=null},T=()=>{u.value=null,m.value=null},C=()=>{m.value=null},U={altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"};z(()=>{c.value!==null&&(new N(c.value,{autoProcessQueue:!1,previewTemplate:Oe,uploadMultiple:!0,url:"http://localhost:3011/file/",method:"POST",acceptedFiles:"image/jpeg,image/png,image/jpg,.pdf,.docs,.docx",previewsContainer:c.value.parentElement.querySelector(".preview-container"),init:function(){this.on("addedfile",function(t){a.attachments.push(t),t.type&&t.type.startsWith&&!t.type.startsWith("image")&&c.value.parentElement.querySelectorAll("[data-dz-thumbnail]").forEach(function(i){i.src="/storage/assets/bx-file.svg"})}),this.on("removedfile",function(t){a.attachments.splice(t,1)})}}),c.value.querySelector(".dz-default")&&(c.value.querySelector(".dz-default").innerHTML=`
                    <div style="display: flex; justify-content: center;">
                        <i class="display-4 text-muted ri-upload-cloud-2-fill"></i>
                    </div>
                    <small style="display: flex; justify-content: center;" class="form-text text-muted mb-2"><strong>Drop files here or click to upload.</strong></small>
                `))});const M=()=>{a.post("/land/create",{onStart:()=>{},onSuccess:()=>{}})};return(t,s)=>{const i=R("ckeditor");return q(),B(E,null,{default:S(()=>[r(o(A),{title:"Add Land"},{default:S(()=>[I]),_:1}),r(F,{title:"Add Land",pageTitle:"Dashboard"}),e("div",W,[e("div",Y,[e("div",G,[e("div",Q,[e("div",Z,[J,y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>o(a).name=l),class:w([{"is-invalid":o(a).errors.name},"form-control"]),type:"text"},null,2),[[V,o(a).name]]),K]),e("div",X,[ee,r(i,{editor:o(j),modelValue:o(a).description,"onUpdate:modelValue":s[1]||(s[1]=l=>o(a).description=l),config:D},null,8,["editor","modelValue"])]),e("div",le,[e("div",se,[e("div",te,[oe,y(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>o(a).size=l),type:"text",class:"form-control",id:"size"},null,512),[[V,o(a).size]])])]),e("div",ae,[e("div",ie,[ne,r(o($),{modelValue:o(a).ground_breaking,"onUpdate:modelValue":s[3]||(s[3]=l=>o(a).ground_breaking=l),class:"form-control",config:U},null,8,["modelValue"])])])])])]),e("div",de,[re,e("div",ce,[e("div",null,[ue,e("div",{ref_key:"dropRef",ref:c,id:"drop",class:"dropzone custom-dropzone",style:{"justify-content":"center"}},null,512),e("div",{class:"preview-container",ref_key:"dropPreview",ref:P},null,512)])])]),e("div",{class:"text-end mb-4"},[e("button",{type:"submit",class:"btn btn-success w-sm",onClick:M},"Create")])]),e("div",me,[e("div",pe,[ve,e("div",be,[e("div",fe,[_e,r(o(p),{class:"form-select mb-3",modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=l=>f.value=l),placeholder:"Select Region",options:b.value,searchable:!0,"track-by":"label"},null,8,["modelValue","options"])]),e("div",he,[ge,r(o(p),{class:"form-select mb-3",modelValue:v.value,"onUpdate:modelValue":s[5]||(s[5]=l=>v.value=l),placeholder:"Select Province",searchable:!0,"track-by":"label",options:f.value?h.value:[]},null,8,["modelValue","options"])]),e("div",ye,[Ve,r(o(p),{class:"form-select mb-3",modelValue:u.value,"onUpdate:modelValue":s[6]||(s[6]=l=>u.value=l),placeholder:"Select Municipality",searchable:!0,"track-by":"label",options:v.value?g.value:[]},null,8,["modelValue","options"])]),e("div",we,[ke,r(o(p),{class:"form-select mb-3",modelValue:m.value,"onUpdate:modelValue":s[7]||(s[7]=l=>m.value=l),placeholder:"Select Barangay",searchable:!0,"track-by":"label",options:u.value?x.value:[]},null,8,["modelValue","options"])]),e("div",xe,[ze,y(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=l=>o(a).address=l),class:"form-control",id:"address",rows:"5"},`
                           `,512),[[V,o(a).address]])])])]),e("div",Se,[je,e("div",De,[e("div",Pe,[Le,r(o(p),{mode:"single",modelValue:o(a).seller_id,"onUpdate:modelValue":s[9]||(s[9]=l=>o(a).seller_id=l),placeholder:"Select Seller","close-on-select":!0,searchable:!0,options:k.contacts,class:w({"is-invalid":o(a).errors.seller_id})},null,8,["modelValue","options","class"]),Te]),e("div",Ce,[Ue,r(o(p),{mode:"single",modelValue:o(a).owner_id,"onUpdate:modelValue":s[10]||(s[10]=l=>o(a).owner_id=l),placeholder:"Select Owner","close-on-select":!0,searchable:!0,options:k.contacts,class:w({"is-invalid":o(a).errors.owner_id})},null,8,["modelValue","options","class"]),Me])])])])])]),_:1})}}};export{$e as default};
