import{b as d,T as M,x as z,z as _,o as O,c as R,w as S,a as r,u as a,Z as q,e,l as h,y as g,n as V}from"./app-6a7dc968.js";import{L as B}from"./main-efa8ec72.js";import{P as C}from"./page-header-980f0e6a.js";import{$ as A,C as E,s as p}from"./default-d2e7457b.js";import"./logo-dark-d94ba77b.js";import"./_plugin-vue_export-helper-c27b6911.js";const F=e("meta",{name:"viewport",content:"your content"},null,-1),N={class:"row"},$={class:"col-lg-8"},H={class:"card"},I={class:"card-body"},W={class:"mb-3"},Y=e("label",{class:"form-label",for:"name"},"Land Name",-1),G=e("div",{class:"invalid-feedback"},"The land name is required",-1),Q={class:"mb-3"},Z=e("label",{class:"form-label",for:"description"},"Description",-1),J={class:"row"},K={class:"col-lg-4"},X={class:"mb-3 mb-lg-0"},ee=e("label",{for:"size",class:"form-label"},"Size / Sqm",-1),le={class:"col-lg-4"},se={class:"mb-3 mb-lg-0"},te=e("label",{for:"groundbreaking",class:"form-label"},"Groundbreaking Date",-1),ae={class:"card"},oe=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Attached files")],-1),ie={class:"card-body"},ne=e("p",{class:"text-muted"},"Add Attached files here.",-1),de={class:"col-lg-4"},re={class:"card"},ce=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Location Details")],-1),ue={class:"card-body"},me={class:"form-group"},pe=e("label",{class:"form-label"},"Region",-1),ve={class:"form-group"},be=e("label",{class:"form-label"},"Province",-1),fe={class:"form-group"},_e=e("label",{class:"form-label"},"Municipality",-1),he={class:"form-group"},ge=e("label",{class:"form-label"},"Barangay",-1),ye={class:"mb-3"},we=e("label",{for:"address",class:"form-label"},"Blk/Lot/Street/House No.",-1),Ve={class:"card"},xe=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Seller & Owner Details")],-1),ke={class:"card-body"},ze={class:"mb-3"},Se=e("label",{for:"seller",class:"form-label"},"Seller",-1),je=e("div",{class:"invalid-feedback"},"The seller is required",-1),De={class:"mb-3"},Pe=e("label",{for:"owner",class:"form-label"},"Owner",-1),Te=e("div",{class:"invalid-feedback"},"The owner is required",-1),Le=`
    <ul class="list-unstyled mb-0" id="dropzone-preview">
        <li class="mt-2" id="dropzone-preview-list">
            <!-- This is used as the file preview template -->
            <div class="border rounded">
                <div class="d-flex p-2">
                    <div class="flex-shrink-0 me-3">
                        <div class="avatar-sm rounded">
                            <img src="#" alt="Project-Image" data-dz-thumbnail class="img-fluid rounded d-block" />
                        </div>
                    </div>
                    <div class="flex-grow-1">
                        <div class="pt-1">
                            <h5 class="fs-14 mb-1" data-dz-name>&nbsp;</h5>
                            <p class="fs-13 text-muted mb-0" data-dz-size></p>
                            <strong class="error text-danger" data-dz-errormessage></strong>
                        </div>
                    </div>
                    <div class="flex-shrink-0 ms-3">
                        <button data-dz-remove class="btn btn-sm btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </li>
    </ul>
    `,Ce={__name:"Create",props:{contacts:Object},setup(x){const b=d(null),f=d(null),v=d(null),u=d(null),m=d(null),y=d(null),w=d(null),k=d(null),c=d(null);let j=d(),o=M({name:null,description:null,size:null,ground_breaking:null,attachments:[],region:null,province:null,municipality:null,barangay:null,address:null,seller_id:null,owner_id:null});z(async()=>{try{const t=await fetch("/storage/address.json");if(!t.ok)throw new Error("Failed to fetch data");const s=await t.json(),l=Object.keys(s).map(i=>({value:s[i].region_name,label:s[i].region_name,province_list:s[i].province_list}));b.value=l}catch(t){console.error("Error fetching data:",t)}}),_(f,(t,s)=>{if(t!==null&&b.value!==null){D();const l=b.value.find(i=>i.value===t);if(o.region=t,l&&typeof l.province_list=="object"){const i=Object.keys(l.province_list).map(n=>({value:n,label:n,municipality_list:l.province_list[n]}));y.value=i}}}),_(v,(t,s)=>{if(t!==null){P();const l=y.value.find(i=>i.value===t);if(o.province=t,l&&typeof l.municipality_list=="object"){const i=Object.keys(l.municipality_list.municipality_list).map(n=>({value:n,label:n,barangay_list:l.municipality_list.municipality_list[n].barangay_list}));w.value=i}}}),_(u,(t,s)=>{if(t!==null){T();const l=w.value.find(i=>i.value===t);if(o.municipality=t,l&&(Object.values(l.barangay_list),typeof l.barangay_list=="object")){const i=l.barangay_list.map(n=>({value:n,label:n}));k.value=i}}}),_(m,(t,s)=>{t!==null&&(o.barangay=t)});const D=()=>{v.value=null,u.value=null,m.value=null},P=()=>{u.value=null,m.value=null},T=()=>{m.value=null},L={altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"};z(()=>{c.value!==null&&(new A(c.value,{autoProcessQueue:!1,previewTemplate:Le,uploadMultiple:!0,url:"http://localhost:3011/file/",method:"POST",acceptedFiles:"image/jpeg,image/png,image/jpg,.pdf,.docs,.docx",previewsContainer:c.value.parentElement.querySelector(".preview-container"),init:function(){this.on("addedfile",function(t){o.attachments.push(t),t.type&&t.type.startsWith&&!t.type.startsWith("image")&&c.value.parentElement.querySelectorAll("[data-dz-thumbnail]").forEach(function(l){l.src="/storage/assets/bx-file.svg"})}),this.on("removedfile",function(t){o.attachments.splice(t,1)})}}),c.value.querySelector(".dz-default")&&(c.value.querySelector(".dz-default").innerHTML=`
                    <div style="display: flex; justify-content: center;">
                        <i class="display-4 text-muted ri-upload-cloud-2-fill"></i>
                    </div>
                    <small style="display: flex; justify-content: center;" class="form-text text-muted mb-2"><strong>Drop files here or click to upload.</strong></small>
                `))});const U=()=>{o.post("/land/create",{onStart:()=>{},onSuccess:()=>{}})};return(t,s)=>(O(),R(B,null,{default:S(()=>[r(a(q),{title:"Add Land"},{default:S(()=>[F]),_:1}),r(C,{title:"Add Land",pageTitle:"Dashboard"}),e("div",N,[e("div",$,[e("div",H,[e("div",I,[e("div",W,[Y,h(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>a(o).name=l),class:V([{"is-invalid":a(o).errors.name},"form-control"]),type:"text"},null,2),[[g,a(o).name]]),G]),e("div",Q,[Z,h(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>a(o).description=l),class:"form-control",id:"description",rows:"5"},`
                           `,512),[[g,a(o).description]])]),e("div",J,[e("div",K,[e("div",X,[ee,h(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>a(o).size=l),type:"text",class:"form-control",id:"size"},null,512),[[g,a(o).size]])])]),e("div",le,[e("div",se,[te,r(a(E),{modelValue:a(o).ground_breaking,"onUpdate:modelValue":s[3]||(s[3]=l=>a(o).ground_breaking=l),class:"form-control",config:L},null,8,["modelValue"])])])])])]),e("div",ae,[oe,e("div",ie,[e("div",null,[ne,e("div",{ref_key:"dropRef",ref:c,id:"drop",class:"dropzone custom-dropzone",style:{"justify-content":"center"}},null,512),e("div",{class:"preview-container",ref_key:"dropPreview",ref:j},null,512)])])]),e("div",{class:"text-end mb-4"},[e("button",{type:"submit",class:"btn btn-success w-sm",onClick:U},"Create")])]),e("div",de,[e("div",re,[ce,e("div",ue,[e("div",me,[pe,r(a(p),{class:"form-select mb-3",modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=l=>f.value=l),placeholder:"Select Region",options:b.value,searchable:!0,"track-by":"label"},null,8,["modelValue","options"])]),e("div",ve,[be,r(a(p),{class:"form-select mb-3",modelValue:v.value,"onUpdate:modelValue":s[5]||(s[5]=l=>v.value=l),placeholder:"Select Province",searchable:!0,"track-by":"label",options:f.value?y.value:[]},null,8,["modelValue","options"])]),e("div",fe,[_e,r(a(p),{class:"form-select mb-3",modelValue:u.value,"onUpdate:modelValue":s[6]||(s[6]=l=>u.value=l),placeholder:"Select Municipality",searchable:!0,"track-by":"label",options:v.value?w.value:[]},null,8,["modelValue","options"])]),e("div",he,[ge,r(a(p),{class:"form-select mb-3",modelValue:m.value,"onUpdate:modelValue":s[7]||(s[7]=l=>m.value=l),placeholder:"Select Barangay",searchable:!0,"track-by":"label",options:u.value?k.value:[]},null,8,["modelValue","options"])]),e("div",ye,[we,h(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=l=>a(o).address=l),class:"form-control",id:"address",rows:"5"},`
                           `,512),[[g,a(o).address]])])])]),e("div",Ve,[xe,e("div",ke,[e("div",ze,[Se,r(a(p),{mode:"single",modelValue:a(o).seller_id,"onUpdate:modelValue":s[9]||(s[9]=l=>a(o).seller_id=l),placeholder:"Select Seller","close-on-select":!0,searchable:!0,options:x.contacts,class:V({"is-invalid":a(o).errors.seller_id})},null,8,["modelValue","options","class"]),je]),e("div",De,[Pe,r(a(p),{mode:"single",modelValue:a(o).owner_id,"onUpdate:modelValue":s[10]||(s[10]=l=>a(o).owner_id=l),placeholder:"Select Owner","close-on-select":!0,searchable:!0,options:x.contacts,class:V({"is-invalid":a(o).errors.owner_id})},null,8,["modelValue","options","class"]),Te])])])])])]),_:1}))}};export{Ce as default};
