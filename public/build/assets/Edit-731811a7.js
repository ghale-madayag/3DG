import{b as d,T as ie,z as x,x as D,r as ne,o as C,c as L,w as V,a as c,u as i,Z as ce,e,g as de,h as R,i as U,l as S,y as j,n as z}from"./app-ee8cda80.js";import{L as re}from"./main-17b5d321.js";import{P as ue}from"./page-header-861ce382.js";import{_ as me}from"./AlertMsg-cb6ff4a1.js";import{$ as ve,C as pe,a as fe}from"./ckeditor-6b981ce6.js";import{s as _}from"./default-612d3fb3.js";import{S as be}from"./sweetalert2.min-72b165bc.js";import"./logo-dark-d94ba77b.js";import"./_plugin-vue_export-helper-c27b6911.js";const _e=e("meta",{name:"viewport",content:"your content"},null,-1),ge={class:"row mb-3"},he={class:"col-lg-8"},ye={class:"d-flex align-items-center flex-wrap gap-2"},we={class:"flex-shrink-0"},xe={class:"hstack text-nowrap gap-2"},Ve=e("button",{class:"btn btn-soft-danger",id:"remove-actions",onclick:"deleteMultiple()"},[e("i",{class:"ri-delete-bin-2-line"})],-1),ke=e("i",{class:"ri-add-line align-bottom me-1"},null,-1),Se=e("i",{class:"ri-eye-line"},null,-1),je={class:"row"},ze={class:"col-lg-8"},De={class:"card"},Ce={class:"card-body"},Le={class:"mb-3"},Re=e("label",{class:"form-label",for:"name"},"Land Name",-1),Ue=e("div",{class:"invalid-feedback"},"The land name is required",-1),Pe={class:"mb-3"},Te=e("label",{class:"form-label",for:"description"},"Description",-1),Oe={class:"row"},Me={class:"col-lg-4"},Be={class:"mb-3 mb-lg-0"},Ee=e("label",{for:"size",class:"form-label"},"Size / Sqm",-1),qe={class:"col-lg-4"},Ne={class:"mb-3 mb-lg-0"},Fe=e("label",{for:"groundbreaking",class:"form-label"},"Groundbreaking Date",-1),Ae={class:"card"},$e=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Attached files")],-1),Ie={class:"card-body"},He=e("p",{class:"text-muted"},"Add Attached files here.",-1),We={class:"col-lg-4"},Ye={class:"card"},Ge=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Location Details")],-1),Qe={class:"card-body"},Ze={class:"form-group"},Je=e("label",{class:"form-label"},"Region",-1),Ke={class:"form-group"},Xe=e("label",{class:"form-label"},"Province",-1),el={class:"form-group"},ll=e("label",{class:"form-label"},"Municipality",-1),tl={class:"form-group"},sl=e("label",{class:"form-label"},"Barangay",-1),al={class:"mb-3"},ol=e("label",{for:"address",class:"form-label"},"Blk/Lot/Street/House No.",-1),il={class:"card"},nl=e("div",{class:"card-header"},[e("h5",{class:"card-title mb-0"},"Seller & Owner Details")],-1),cl={class:"card-body"},dl={class:"mb-3"},rl=e("label",{for:"seller",class:"form-label"},"Seller",-1),ul=e("div",{class:"invalid-feedback"},"The seller is required",-1),ml={class:"mb-3"},vl=e("label",{for:"owner",class:"form-label"},"Owner",-1),pl=e("div",{class:"invalid-feedback"},"The owner is required",-1),fl=`
    <ul class="list-unstyled mb-0" id="dropzone-preview">
        <li class="mt-2" id="dropzone-preview-list">
            <!-- This is used as the file preview template -->
            <div class="border rounded">
                <div class="d-flex p-2">
                    <div class="flex-shrink-0 me-3">
                        <div class="avatar-sm rounded">
                            <img src="#" alt="Project-Image" data-dz-thumbnail class="img-fluid rounded d-block" />
                        </div>
                    </div>
                    <div class="flex-grow-1">
                        <div class="pt-1">
                            <h5 class="fs-14 mb-1" data-dz-name>&nbsp;</h5>
                            <p class="fs-13 text-muted mb-0" data-dz-size></p>
                            <strong class="error text-danger" data-dz-errormessage></strong>
                        </div>
                    </div>
                    <div class="flex-shrink-0 ms-3">
                        <button data-dz-remove class="btn btn-sm btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </li>
    </ul>
    `,Sl={__name:"Edit",props:{land:Object,contacts:Object,message:String},setup(b){const P=fe,T={toolbar:{items:["bold","italic","numberedList","bulletedList","indent","outdent","link","undo","redo"]}},p=d(null);let O=d();d(null);let M=b;const B=be.mixin({customClass:{confirmButton:"btn btn-primary mr-2",cancelButton:"btn btn-link",container:"modal-lesson"},buttonsStyling:!1});let{name:E,slug:q,description:N,size:F,ground_breaking:A,attachments:y,region:$,province:I,municipality:H,barangay:W,address:Y,seller_id:G,owner_id:Q}=M.land,t=ie({name:E,slug:q,description:N,size:F,ground_breaking:A,attachments:y,region:$,province:I,municipality:H,barangay:W,address:Y,seller_id:G,owner_id:Q,oldattachments:[]});const f=d(),u=d(t.region),m=d(t.province),r=d(t.municipality),v=d(t.barangay),g=d(null),h=d(null),k=d(null),Z=async()=>{try{const a=await fetch("/storage/address.json");if(!a.ok)throw new Error("Failed to fetch data");const l=await a.json(),o=Object.keys(l).map(n=>({value:l[n].region_name,label:l[n].region_name,province_list:l[n].province_list}));f.value=o,f.value.find(n=>n.value===u.value)&&t.region!==null&&(u.value=t.region,t.province!==null&&(m.value=t.province,t.municipality!==null&&(r.value=t.municipality,t.barangay!==null&&(v.value=t.barangay)))),J()}catch(a){console.error("Error fetching data:",a)}},J=()=>{if(u.value!==null&&f.value!==null){const a=f.value.find(l=>l.value===u.value);if(t.region=u.value,a&&typeof a.province_list=="object"){const l=Object.keys(a.province_list).map(o=>({value:o,label:o,municipality_list:a.province_list[o]}));g.value=l,K()}}},K=()=>{if(m.value!==null){const a=g.value.find(l=>l.value===m.value);if(t.province=m.value,a&&typeof a.municipality_list=="object"){const l=Object.keys(a.municipality_list.municipality_list).map(o=>({value:o,label:o,barangay_list:a.municipality_list.municipality_list[o].barangay_list}));h.value=l,X()}}},X=()=>{if(r.value!==null){const a=h.value.find(l=>l.value===r.value);if(t.municipality=r.value,a&&(Object.values(a.barangay_list),typeof a.barangay_list=="object")){const l=a.barangay_list.map(o=>({value:o,label:o}));k.value=l,se()}}};x(u,(a,l)=>{if(a!==null&&f.value!==null){ee();const o=f.value.find(s=>s.value===a);if(t.region=a,o&&typeof o.province_list=="object"){const s=Object.keys(o.province_list).map(n=>({value:n,label:n,municipality_list:o.province_list[n]}));g.value=s}}}),x(m,(a,l)=>{if(a!==null){le();const o=g.value.find(s=>s.value===a);if(t.province=a,o&&typeof o.municipality_list=="object"){const s=Object.keys(o.municipality_list.municipality_list).map(n=>({value:n,label:n,barangay_list:o.municipality_list.municipality_list[n].barangay_list}));h.value=s}}}),x(r,(a,l)=>{if(a!==null){te();const o=h.value.find(s=>s.value===a);if(t.municipality=a,o&&(Object.values(o.barangay_list),typeof o.barangay_list=="object")){const s=o.barangay_list.map(n=>({value:n,label:n}));k.value=s}}}),x(v,(a,l)=>{a!==null&&(t.barangay=a)});const ee=()=>{m.value=null,r.value=null,v.value=null},le=()=>{r.value=null,v.value=null},te=()=>{v.value=null},se=()=>{v.value!=null&&(t.barangay=v.value)},ae={altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"};D(()=>{if(p.value!==null){let a=new ve(p.value,{autoProcessQueue:!1,previewTemplate:fl,uploadMultiple:!0,url:"http://localhost:3011/file/",method:"POST",createImageThumbnails:!0,acceptedFiles:"image/jpeg,image/png,image/jpg,.pdf,.docs,.docx",previewsContainer:p.value.parentElement.querySelector(".preview-container"),init:function(){this.on("addedfile",function(l){t.attachments.push(l),l.type&&l.type.startsWith&&!l.type.startsWith("image")&&p.value.parentElement.querySelectorAll("[data-dz-thumbnail]").forEach(function(s){s.src="/storage/assets/bx-file.svg"})}),this.on("removedfile",function(l){t.attachments.splice(l,1),t.oldattachments.push(l.name)})}});p.value.querySelector(".dz-default")&&(p.value.querySelector(".dz-default").innerHTML=`
                    <div style="display: flex; justify-content: center;">
                        <i class="display-4 text-muted ri-upload-cloud-2-fill"></i>
                    </div>
                    <small style="display: flex; justify-content: center;" class="form-text text-muted mb-2"><strong>Drop files here or click to upload.</strong></small>
                `);for(let l=0;l<y.length;l++){const o=y[l].id,s=y[l].file_name,n={id:o,name:s},w=s.split(".").pop().toLowerCase();w==="jpg"||w==="jpeg"||w==="png"||w==="gif"?(n.size="1100",n.dataURL="/storage/land/"+encodeURIComponent(s)):(n.dataURL="/storage/assets/bx-file.svg",n.size="1100"),a.emit("addedfile",n),a.emit("thumbnail",n,n.dataURL),a.emit("complete",n)}}}),D(Z);const oe=()=>{console.log(t.slug),t.post("/land/"+t.slug,{onStart:()=>{},onSuccess:()=>{B.fire("Updated!","The data has been update.","success"),t.reset()},preserveScroll:!0})};return(a,l)=>{const o=ne("ckeditor");return C(),L(re,null,{default:V(()=>[c(i(ce),{title:"Edit Land"},{default:V(()=>[_e]),_:1}),c(ue,{title:"Edit Land",pageTitle:"Dashboard"}),e("div",ge,[e("div",he,[b.message?(C(),L(me,{key:0,type:"success",msg:b.message},null,8,["msg"])):de("",!0),e("div",ye,[e("div",we,[e("div",xe,[Ve,c(i(U),{href:"/land/create",class:"btn btn-success w-sm"},{default:V(()=>[ke,R(" Add New")]),_:1}),c(i(U),{href:"/land/"+b.land.slug,class:"btn btn-soft-success w-sm"},{default:V(()=>[Se,R(" View")]),_:1},8,["href"])])])])])]),e("div",je,[e("div",ze,[e("div",De,[e("div",Ce,[e("div",Le,[Re,S(e("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>i(t).name=s),class:z([{"is-invalid":i(t).errors.name},"form-control"]),type:"text"},null,2),[[j,i(t).name]]),Ue]),e("div",Pe,[Te,c(o,{editor:i(P),modelValue:i(t).description,"onUpdate:modelValue":l[1]||(l[1]=s=>i(t).description=s),config:T},null,8,["editor","modelValue"])]),e("div",Oe,[e("div",Me,[e("div",Be,[Ee,S(e("input",{"onUpdate:modelValue":l[2]||(l[2]=s=>i(t).size=s),type:"text",class:"form-control",id:"size"},null,512),[[j,i(t).size]])])]),e("div",qe,[e("div",Ne,[Fe,c(i(pe),{modelValue:i(t).ground_breaking,"onUpdate:modelValue":l[3]||(l[3]=s=>i(t).ground_breaking=s),class:"form-control",config:ae},null,8,["modelValue"])])])])])]),e("div",Ae,[$e,e("div",Ie,[e("div",null,[He,e("div",{ref_key:"dropRef",ref:p,id:"drop",class:"dropzone custom-dropzone",style:{"justify-content":"center"}},null,512),e("div",{class:"preview-container",ref_key:"dropPreview",ref:O},null,512)])])]),e("div",{class:"text-end mb-4"},[e("button",{type:"submit",class:"btn btn-success w-sm",onClick:oe},"Update")])]),e("div",We,[e("div",Ye,[Ge,e("div",Qe,[e("div",Ze,[Je,c(i(_),{class:"form-select mb-3",modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=s=>u.value=s),placeholder:"Select Region",options:f.value,searchable:!0,"track-by":"label"},null,8,["modelValue","options"])]),e("div",Ke,[Xe,c(i(_),{class:"form-select mb-3",modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=s=>m.value=s),placeholder:"Select Province",searchable:!0,"track-by":"label",options:u.value?g.value:[]},null,8,["modelValue","options"])]),e("div",el,[ll,c(i(_),{class:"form-select mb-3",modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=s=>r.value=s),placeholder:"Select Municipality",searchable:!0,"track-by":"label",options:m.value?h.value:[]},null,8,["modelValue","options"])]),e("div",tl,[sl,c(i(_),{class:"form-select mb-3",modelValue:v.value,"onUpdate:modelValue":l[7]||(l[7]=s=>v.value=s),placeholder:"Select Barangay",searchable:!0,"track-by":"label",options:r.value?k.value:[]},null,8,["modelValue","options"])]),e("div",al,[ol,S(e("textarea",{"onUpdate:modelValue":l[8]||(l[8]=s=>i(t).address=s),class:"form-control",id:"address",rows:"5"},`
                           `,512),[[j,i(t).address]])])])]),e("div",il,[nl,e("div",cl,[e("div",dl,[rl,c(i(_),{mode:"single",modelValue:i(t).seller_id,"onUpdate:modelValue":l[9]||(l[9]=s=>i(t).seller_id=s),placeholder:"Select Seller","close-on-select":!0,searchable:!0,options:b.contacts,class:z({"is-invalid":i(t).errors.seller_id})},null,8,["modelValue","options","class"]),ul]),e("div",ml,[vl,c(i(_),{mode:"single",modelValue:i(t).owner_id,"onUpdate:modelValue":l[10]||(l[10]=s=>i(t).owner_id=s),placeholder:"Select Owner","close-on-select":!0,searchable:!0,options:b.contacts,class:z({"is-invalid":i(t).errors.owner_id})},null,8,["modelValue","options","class"]),pl])])])])])]),_:1})}}};export{Sl as default};
