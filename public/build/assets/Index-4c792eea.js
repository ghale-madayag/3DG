import{b as d,T as N,s as q,m as O,o as b,c as F,w as D,a as S,u as o,Z as H,e,d as C,g as k,h as I,j as z,l as f,x as h,n as r,t as c}from"./app-6b88d6f8.js";import{L as Z}from"./main-960a6d4e.js";import{P as G}from"./page-header-f36c3911.js";import{L as J,w as g}from"./mermaid-cf784c66.js";import"./logo-dark-d94ba77b.js";import"./_plugin-vue_export-helper-c27b6911.js";const K=e("meta",{name:"viewport",content:"your content"},null,-1),Q={class:"row"},W={class:"col-lg-12"},X={class:"card"},Y={class:"card-header border-bottom-dashed"},$={class:"row g-4 align-items-center"},ee=e("div",{class:"col-sm"},[e("div",null,[e("h5",{class:"card-title mb-0"},"Contact List")])],-1),te={class:"col-sm-auto"},se={class:"d-flex flex-wrap align-items-start gap-2"},ae=e("i",{class:"ri-delete-bin-2-line"},null,-1),oe=[ae],le=e("i",{class:"ri-add-line align-bottom me-1"},null,-1),ne={class:"modal-dialog modal-dialog-centered"},ie={class:"modal-content"},de=e("h5",{class:"modal-title"},null,-1),re={class:"modal-body"},ce={class:"mb-3"},me=e("label",{for:"fname",class:"form-label"},"First Name",-1),ue=e("div",{class:"invalid-feedback"},"Please enter first name.",-1),fe={class:"mb-3"},he=e("label",{for:"lname",class:"form-label"},"Last Name",-1),_e={class:"invalid-feedback"},pe={class:"mb-3"},ve=e("label",{for:"email",class:"form-label"},"Email",-1),be={class:"invalid-feedback"},ge={class:"mb-3"},Ce=e("label",{for:"phone",class:"form-label"},"Phone",-1),ke={class:"invalid-feedback"},xe={class:"mb-3"},ye=e("label",{for:"address",class:"form-label"},"Address",-1),we={class:"invalid-feedback"},Ne=e("label",{for:"other_details",class:"form-label"},"Other Details",-1),De={class:"invalid-feedback"},Se={class:"modal-footer"},Le={class:"hstack gap-2 justify-content-end"},Pe={key:0,class:"spinner-border text-success",role:"status"},Te=e("span",{class:"sr-only"},"Loading...",-1),Ve=[Te],Ae={type:"submit",class:"btn btn-success is-loading"},qe={__name:"Index",props:{contacts:Object},setup(L){const x=d(null);let _;const n=d([]);let m=L;const p=d(!1),P=()=>{p.value?R():M()};let s=N({id:null,fname:null,lname:null,email:null,phone:d(),address:null,other_details:null}),y=N({id:null});d(!1);const i=d(!1),T=a=>{p.value=!0,i.value=!0,s.id=a.cells[0].data,s.fname=a.cells[1].data,s.lname=a.cells[2].data,s.phone=a.cells[4].data,s.email=a.cells[5].data,s.address=a.cells[6].data,s.other_details=a.cells[7].data},w=()=>{i.value=!1},v=a=>a.map(t=>[t.id,t.fname,t.lname,t.fname+" "+t.lname,t.phone,t.email,t.address,t.other_details,j(t.created_at),t.id]);q(()=>{const a=v(m.contacts);_=new J({columns:[{id:"checkboxCol",width:"40px",name:g("input",{type:"checkbox",className:"form-check-input",onChange:t=>E(t)}),align:"center",formatter:(t,l)=>g("input",{type:"checkbox",className:"form-check-input",onClick:u=>A(u,l)}),sort:!1},{id:"fnameColumn",name:"fname",hidden:!0},{id:"lnameColumn",name:"lname",hidden:!0},{id:"nameColumn",name:"Name"},{id:"phoneColumn",name:"Phone"},{id:"emailColumn",name:"Email"},{id:"addressColumn",name:"Address"},{id:"other_details",name:"other_details",hidden:!0},{id:"createColumn",name:"Created Date"},{id:"actionsColumn",name:"Actions",align:"center",width:"75px",formatter:(t,l)=>g("a",{href:"javascript:void(0);",className:"text-muted",onClick:()=>T(l)},[g("i",{className:"ri-pencil-fill fs-16"})]),sort:!1}],sort:!1,theme:"mermaid",search:!0,pagination:{limit:10},data:function(){return new Promise(function(t){setTimeout(function(){t(a)},2e3)})}}).render(x.value)});const V=()=>{i.value=!0,p.value=!1},A=(a,t)=>{if(a.target.checked)n.value.push(t.cells[0].data);else{const l=n.value.indexOf(t.cells[0].data);l!==-1&&n.value.splice(l,1)}},E=a=>{const t=a.target.checked;n.value=t?m.contacts.map(u=>u.id):[],document.querySelectorAll(".form-check-input").forEach(u=>{u.checked=t})},M=()=>{s.post("/contact/store",{onStart:()=>{},onSuccess:()=>{const a=v(m.contacts);i.value=!1,_.updateConfig({data:function(){return new Promise(function(t){setTimeout(function(){t(a)},1e3)})}}).forceRender(),s.reset()}})},R=()=>{s.post("/contact/"+s.id,{onStart:()=>{},onSuccess:()=>{const a=v(m.contacts);i.value=!1,_.updateConfig({data:function(){return new Promise(function(t){setTimeout(function(){t(a)},1e3)})}}).forceRender(),s.reset()}})},U=()=>{y.id=n,y.delete("/contact/delete",{id:n.value,onSuccess:()=>{const a=v(m.contacts);_.updateConfig({data:function(){return new Promise(function(t){setTimeout(function(){t(a)},1e3)})}}).forceRender()}})},B=O(()=>p.value?"Edit Contact":"Add Contact");function j(a){const t=new Date(a),l={month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return t.toLocaleDateString("en-US",l)}return(a,t)=>(b(),F(Z,null,{default:D(()=>[S(o(H),{title:"Contact List"},{default:D(()=>[K]),_:1}),S(G,{title:"Contact",pageTitle:"Dashboard"}),e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",$,[ee,e("div",te,[e("div",se,[n.value.length>0?(b(),C("button",{key:0,class:"btn btn-soft-danger",onClick:U},oe)):k("",!0),e("button",{type:"button",class:"btn btn-success add-btn",onClick:V},[le,I(" Add New")])])])])]),e("div",{class:"card-body",ref_key:"gridContainer",ref:x},null,512)])])]),i.value?(b(),C("div",{key:0,class:r(["modal fade",{show:i.value}]),tabindex:"-1",role:"dialog"},[e("div",ne,[e("div",ie,[e("div",{class:"modal-header bg-light p-3"},[de,e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:w})]),e("form",{class:"tablelist-form",autocomplete:"off",onSubmit:z(P,["prevent"])},[e("div",re,[e("div",ce,[me,f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).fname=l),id:"fname",type:"text",class:r(["form-control",{"is-invalid":o(s).errors.fname}]),placeholder:"Enter First Name",required:""},null,2),[[h,o(s).fname]]),ue]),e("div",fe,[he,f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).lname=l),id:"lname",type:"text",class:r(["form-control",{"is-invalid":o(s).errors.lname}]),placeholder:"Enter Last Name",required:""},null,2),[[h,o(s).lname]]),e("div",_e,c(o(s).errors.lname),1)]),e("div",pe,[ve,f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).email=l),id:"email",type:"email",class:r(["form-control",{"is-invalid":o(s).errors.email}]),placeholder:"Enter email"},null,2),[[h,o(s).email]]),e("div",be,c(o(s).errors.email),1)]),e("div",ge,[Ce,e("div",ke,c(o(s).errors.phone),1)]),e("div",xe,[ye,f(e("textarea",{class:r(["form-control",{"is-invalid":o(s).errors.address}]),"onUpdate:modelValue":t[3]||(t[3]=l=>o(s).address=l),id:"address",rows:"2"},null,2),[[h,o(s).address]]),e("div",we,c(o(s).errors.address),1)]),e("div",null,[Ne,f(e("textarea",{class:r(["form-control",{"is-invalid":o(s).errors.other_details}]),"onUpdate:modelValue":t[4]||(t[4]=l=>o(s).other_details=l),id:"other_details",rows:"3"},null,2),[[h,o(s).other_details]]),e("div",De,c(o(s).errors.other_details),1)])]),e("div",Se,[e("div",Le,[e("button",{type:"button",class:"btn btn-light",onClick:w},"Close"),o(s).processing?(b(),C("div",Pe,Ve)):k("",!0),e("button",Ae,c(B.value),1)])])],32)])])],2)):k("",!0)]),_:1}))}};export{qe as default};
