import{s as F,b as c,T as A,x as I,m as Y,r as z,o as C,c as Z,w as B,a as x,u as a,Z as G,e,d as y,g as w,h as J,j as K,l as m,y as h,n as u,t as f,R as Q}from"./app-5745c941.js";import{L as W}from"./main-10c3ffd6.js";import{P as X}from"./page-header-e5314a2e.js";import{L as $,w as k}from"./mermaid-cf784c66.js";import{S as ee}from"./sweetalert2.min-196b2b22.js";import"./logo-dark-d94ba77b.js";import"./_plugin-vue_export-helper-c27b6911.js";const te=e("meta",{name:"viewport",content:"your content"},null,-1),se={class:"row"},oe={class:"col-lg-12"},ae={class:"card"},le={class:"card-header border-bottom-dashed"},ne={class:"row g-4 align-items-center"},ie=e("div",{class:"col-sm"},[e("div",null,[e("h5",{class:"card-title mb-0"},"User List")])],-1),de={class:"col-sm-auto"},re={class:"d-flex flex-wrap align-items-start gap-2"},ce=e("i",{class:"ri-delete-bin-2-line"},null,-1),me=[ce],ue=e("i",{class:"ri-add-line align-bottom me-1"},null,-1),fe={class:"modal-dialog modal-dialog-centered"},_e={class:"modal-content"},he=e("h5",{class:"modal-title"},null,-1),pe={class:"modal-body"},ve={class:"mb-3"},be=e("label",{for:"fname",class:"form-label"},"First Name",-1),ge=e("div",{class:"invalid-feedback"},"Please enter first name.",-1),Ce={class:"mb-3"},ke=e("label",{for:"lname",class:"form-label"},"Last Name",-1),xe={class:"invalid-feedback"},ye={class:"mb-3"},we=e("label",{for:"email",class:"form-label"},"Email",-1),Se={class:"invalid-feedback"},De={class:"mb-3"},Ne=e("label",{for:"phone",class:"form-label"},"Phone",-1),Ae={class:"invalid-feedback"},Be={class:"mb-3"},Pe=e("label",{for:"address",class:"form-label"},"Address",-1),Ve={class:"invalid-feedback"},Le={class:"mb-3"},Re=e("label",{for:"other_details",class:"form-label"},"Other Details",-1),Te={class:"invalid-feedback"},Ue=e("label",{for:"role"},"Select Role",-1),Me=e("option",{selected:""},"Select Role",-1),Ee=e("option",{value:"contact"},"Contact Person",-1),je=e("option",{value:"client"},"Client",-1),qe=e("option",{value:"agent"},"Agent",-1),He=e("option",{value:"staff"},"Staff",-1),Oe=e("option",{value:"administrator"},"Administrator",-1),Fe=[Me,Ee,je,qe,He,Oe],Ie={class:"modal-footer"},Ye={class:"hstack gap-2 justify-content-end"},ze={key:0,class:"spinner-border text-success",role:"status"},Ze=e("span",{class:"sr-only"},"Loading...",-1),Ge=[Ze],Je={type:"submit",class:"btn btn-success is-loading"},st=F({__name:"Index",props:{contacts:Object},setup(P){const S=c(),D=c(null);let p;const i=c([]);let _=P;const v=c(!1),V=()=>{v.value?j():E()};let s=A({id:null,name:null,fname:null,lname:null,email:null,phone:null,address:null,other_details:null,roles:null}),b=A({id:null});c(!1);const r=c(!1),L=ee.mixin({customClass:{confirmButton:"btn btn-primary mr-2",cancelButton:"btn btn-link",container:"modal-lesson"},buttonsStyling:!1}),R=o=>{v.value=!0,r.value=!0,console.log(o),s.id=o.cells[0].data,s.fname=o.cells[1].data,s.lname=o.cells[2].data,s.phone=o.cells[4].data,s.email=o.cells[5].data,s.address=o.cells[6].data,s.other_details=o.cells[7].data,s.roles=o.cells[9].data},N=()=>{r.value=!1},g=o=>o.map(t=>[t.id,t.fname,t.lname,t.fname+" "+t.lname,t.phone,t.email,t.address,t.other_details,O(t.created_at),t.roles[0].name]);I(()=>{const o=g(_.contacts);console.log(o),p=new $({columns:[{id:"checkboxCol",width:"40px",name:k("input",{type:"checkbox",className:"form-check-input",onChange:t=>M(t)}),align:"center",formatter:(t,l)=>k("input",{type:"checkbox",className:"form-check-input",onClick:d=>U(d,l)}),sort:!1},{id:"fnameColumn",name:"fname",hidden:!0},{id:"lnameColumn",name:"lname",hidden:!0},{id:"nameColumn",name:"Name"},{id:"phoneColumn",name:"Phone"},{id:"emailColumn",name:"Email"},{id:"addressColumn",name:"Address"},{id:"other_details",name:"other_details",hidden:!0},{id:"createColumn",name:"Created Date"},{name:"Role"},{id:"actionsColumn",name:"Actions",align:"center",width:"75px",formatter:(t,l)=>k("a",{href:"javascript:void(0);",className:"text-muted",onClick:()=>R(l)},[k("i",{className:"ri-pencil-fill fs-16"})]),sort:!1}],sort:!1,theme:"mermaid",search:!0,pagination:{limit:10},data:function(){return new Promise(function(t){setTimeout(function(){t(o)},2e3)})}}).render(D.value)});const T=()=>{r.value=!0,v.value=!1},U=(o,t)=>{if(o.target.checked)i.value.push(t.cells[0].data);else{const l=i.value.indexOf(t.cells[0].data);l!==-1&&i.value.splice(l,1)}},M=o=>{const t=o.target.checked;i.value=t?_.contacts.map(d=>d.id):[],document.querySelectorAll(".form-check-input").forEach(d=>{d.checked=t})},E=()=>{s.phone=S.value,s.name=s.fname+" "+s.lname,s.post("/user/store",{onStart:()=>{},onSuccess:()=>{const o=g(_.contacts);r.value=!1,p.updateConfig({data:function(){return new Promise(function(t){setTimeout(function(){t(o)},1e3)})}}).forceRender(),s.reset()}})},j=()=>{s.post("/contact/"+s.id,{onStart:()=>{},onSuccess:()=>{const o=g(_.contacts);r.value=!1,p.updateConfig({data:function(){return new Promise(function(t){setTimeout(function(){t(o)},1e3)})}}).forceRender(),s.reset()}})},q=()=>{L.fire({title:"Are you sure?",text:"Are you Sure You want to Delete this data ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&(b.id=i,console.log(b.id),b.delete("/contact/delete",{id:i.value,onSuccess:()=>{const t=g(_.contacts);p.updateConfig({data:function(){return new Promise(function(l){setTimeout(function(){l(t)},1e3)})}}).forceRender(),b.reset(),i.value=[]}}))})},H=Y(()=>v.value?"Edit Contact":"Add Contact");function O(o){const t=new Date(o),l={month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return t.toLocaleDateString("en-US",l)}return(o,t)=>{const l=z("phone-input");return C(),Z(W,null,{default:B(()=>{var d;return[x(a(G),{title:"User List"},{default:B(()=>[te]),_:1}),x(X,{title:"User",pageTitle:"Dashboard"}),e("div",se,[e("div",oe,[e("div",ae,[e("div",le,[e("div",ne,[ie,e("div",de,[e("div",re,[((d=i.value)==null?void 0:d.length)>0?(C(),y("button",{key:0,class:"btn btn-soft-danger",onClick:q},me)):w("",!0),e("button",{type:"button",class:"btn btn-success add-btn",onClick:T},[ue,J(" Add New")])])])])]),e("div",{class:"card-body",ref_key:"gridContainer",ref:D},null,512)])])]),r.value?(C(),y("div",{key:0,class:u(["modal fade",{show:r.value}]),tabindex:"-1",role:"dialog"},[e("div",fe,[e("div",_e,[e("div",{class:"modal-header bg-light p-3"},[he,e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:N})]),e("form",{class:"tablelist-form",autocomplete:"off",onSubmit:K(V,["prevent"])},[e("div",pe,[e("div",ve,[be,m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>a(s).fname=n),id:"fname",type:"text",class:u(["form-control",{"is-invalid":a(s).errors.name}]),placeholder:"Enter First Name",required:""},null,2),[[h,a(s).fname]]),ge]),e("div",Ce,[ke,m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>a(s).lname=n),id:"lname",type:"text",class:u(["form-control",{"is-invalid":a(s).errors.lname}]),placeholder:"Enter Last Name",required:""},null,2),[[h,a(s).lname]]),e("div",xe,f(a(s).errors.lname),1)]),e("div",ye,[we,m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>a(s).email=n),id:"email",type:"email",class:u(["form-control",{"is-invalid":a(s).errors.email}]),placeholder:"Enter email"},null,2),[[h,a(s).email]]),e("div",Se,f(a(s).errors.email),1)]),e("div",De,[Ne,x(l,{defaultCountry:"PH",onPhone:t[3]||(t[3]=n=>S.value=n)}),e("div",Ae,f(a(s).errors.phone),1)]),e("div",Be,[Pe,m(e("textarea",{class:u(["form-control",{"is-invalid":a(s).errors.address}]),"onUpdate:modelValue":t[4]||(t[4]=n=>a(s).address=n),id:"address",rows:"2"},null,2),[[h,a(s).address]]),e("div",Ve,f(a(s).errors.address),1)]),e("div",Le,[Re,m(e("textarea",{class:u(["form-control",{"is-invalid":a(s).errors.other_details}]),"onUpdate:modelValue":t[5]||(t[5]=n=>a(s).other_details=n),id:"other_details",rows:"3"},null,2),[[h,a(s).other_details]]),e("div",Te,f(a(s).errors.other_details),1)]),e("div",null,[Ue,m(e("select",{class:"form-select mb-3","onUpdate:modelValue":t[6]||(t[6]=n=>a(s).roles=n),"aria-label":"Default select example"},Fe,512),[[Q,a(s).roles]])])]),e("div",Ie,[e("div",Ye,[e("button",{type:"button",class:"btn btn-light",onClick:N},"Close"),a(s).processing?(C(),y("div",ze,Ge)):w("",!0),e("button",Je,f(H.value),1)])])],32)])])],2)):w("",!0)]}),_:1})}}});export{st as default};
