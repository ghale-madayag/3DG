import{s as F,b as c,T as B,x as I,m as Y,r as z,o as g,c as Z,w as P,a as x,u as a,Z as G,e,d as y,g as w,h as J,j as K,l as h,y as _,n as m,t as u}from"./app-976f9ee5.js";import{L as Q}from"./main-f512f018.js";import{P as W}from"./page-header-d0586ccd.js";import{L as X,w as k}from"./mermaid-cf784c66.js";import{S as $}from"./sweetalert2.min-4d97f9c3.js";import"./logo-dark-d94ba77b.js";import"./_plugin-vue_export-helper-c27b6911.js";const ee=e("meta",{name:"viewport",content:"your content"},null,-1),te={class:"row"},se={class:"col-lg-12"},oe={class:"card"},ae={class:"card-header border-bottom-dashed"},ne={class:"row g-4 align-items-center"},le=e("div",{class:"col-sm"},[e("div",null,[e("h5",{class:"card-title mb-0"},"Contact List")])],-1),ie={class:"col-sm-auto"},de={class:"d-flex flex-wrap align-items-start gap-2"},re=e("i",{class:"ri-delete-bin-2-line"},null,-1),ce=[re],me=e("i",{class:"ri-add-line align-bottom me-1"},null,-1),ue={class:"modal-dialog modal-dialog-centered"},fe={class:"modal-content"},he=e("h5",{class:"modal-title"},null,-1),_e={class:"modal-body"},pe={class:"mb-3"},be=e("label",{for:"fname",class:"form-label"},"First Name",-1),ve=e("div",{class:"invalid-feedback"},"Please enter first name.",-1),Ce={class:"mb-3"},ge=e("label",{for:"lname",class:"form-label"},"Last Name",-1),ke={class:"invalid-feedback"},xe={class:"mb-3"},ye=e("label",{for:"email",class:"form-label"},"Email",-1),we={class:"invalid-feedback"},Se={class:"mb-3"},De=e("label",{for:"phone",class:"form-label"},"Phone",-1),Ne={class:"invalid-feedback"},Be={class:"mb-3"},Pe=e("label",{for:"address",class:"form-label"},"Address",-1),Ae={class:"invalid-feedback"},Le=e("label",{for:"other_details",class:"form-label"},"Other Details",-1),Te={class:"invalid-feedback"},Ve={class:"modal-footer"},Ee={class:"hstack gap-2 justify-content-end"},Me={key:0,class:"spinner-border text-success",role:"status"},Re=e("span",{class:"sr-only"},"Loading...",-1),Ue=[Re],je={type:"submit",class:"btn btn-success is-loading"},Ze=F({__name:"Index",props:{contacts:Object},setup(A){const S=c(),D=c(null);let p;const i=c([]);let f=A;const b=c(!1),L=()=>{b.value?j():U()};let s=B({id:null,name:null,lname:null,email:null,phone:null,address:null,other_details:null}),v=B({id:null});c(!1);const r=c(!1),T=$.mixin({customClass:{confirmButton:"btn btn-primary mr-2",cancelButton:"btn btn-link",container:"modal-lesson"},buttonsStyling:!1}),V=o=>{b.value=!0,r.value=!0,s.id=o.cells[0].data,s.name=o.cells[1].data,s.lname=o.cells[2].data,s.phone=o.cells[4].data,s.email=o.cells[5].data,s.address=o.cells[6].data,s.other_details=o.cells[7].data},N=()=>{r.value=!1},C=o=>o.map(t=>[t.id,t.fname,t.lname,t.fname+" "+t.lname,t.phone,t.email,t.address,t.other_details,O(t.created_at),t.id]);I(()=>{const o=C(f.contacts);p=new X({columns:[{id:"checkboxCol",width:"40px",name:k("input",{type:"checkbox",className:"form-check-input",onChange:t=>R(t)}),align:"center",formatter:(t,n)=>k("input",{type:"checkbox",className:"form-check-input",onClick:d=>M(d,n)}),sort:!1},{id:"fnameColumn",name:"fname",hidden:!0},{id:"lnameColumn",name:"lname",hidden:!0},{id:"nameColumn",name:"Name"},{id:"phoneColumn",name:"Phone"},{id:"emailColumn",name:"Email"},{id:"addressColumn",name:"Address"},{id:"other_details",name:"other_details",hidden:!0},{id:"createColumn",name:"Created Date"},{id:"actionsColumn",name:"Actions",align:"center",width:"75px",formatter:(t,n)=>k("a",{href:"javascript:void(0);",className:"text-muted",onClick:()=>V(n)},[k("i",{className:"ri-pencil-fill fs-16"})]),sort:!1}],sort:!1,theme:"mermaid",search:!0,pagination:{limit:10},data:function(){return new Promise(function(t){setTimeout(function(){t(o)},2e3)})}}).render(D.value)});const E=()=>{r.value=!0,b.value=!1},M=(o,t)=>{if(o.target.checked)i.value.push(t.cells[0].data);else{const n=i.value.indexOf(t.cells[0].data);n!==-1&&i.value.splice(n,1)}},R=o=>{const t=o.target.checked;i.value=t?f.contacts.map(d=>d.id):[],document.querySelectorAll(".form-check-input").forEach(d=>{d.checked=t})},U=()=>{s.phone=S.value,s.post("/contact/store",{onStart:()=>{},onSuccess:()=>{const o=C(f.contacts);r.value=!1,p.updateConfig({data:function(){return new Promise(function(t){setTimeout(function(){t(o)},1e3)})}}).forceRender(),s.reset()}})},j=()=>{s.post("/contact/"+s.id,{onStart:()=>{},onSuccess:()=>{const o=C(f.contacts);r.value=!1,p.updateConfig({data:function(){return new Promise(function(t){setTimeout(function(){t(o)},1e3)})}}).forceRender(),s.reset()}})},q=()=>{T.fire({title:"Are you sure?",text:"Are you Sure You want to Delete this data ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&(v.id=i,console.log(v.id),v.delete("/contact/delete",{id:i.value,onSuccess:()=>{const t=C(f.contacts);p.updateConfig({data:function(){return new Promise(function(n){setTimeout(function(){n(t)},1e3)})}}).forceRender(),v.reset(),i.value=[]}}))})},H=Y(()=>b.value?"Edit Contact":"Add Contact");function O(o){const t=new Date(o),n={month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return t.toLocaleDateString("en-US",n)}return(o,t)=>{const n=z("phone-input");return g(),Z(Q,null,{default:P(()=>{var d;return[x(a(G),{title:"Contact List"},{default:P(()=>[ee]),_:1}),x(W,{title:"Contact",pageTitle:"Dashboard"}),e("div",te,[e("div",se,[e("div",oe,[e("div",ae,[e("div",ne,[le,e("div",ie,[e("div",de,[((d=i.value)==null?void 0:d.length)>0?(g(),y("button",{key:0,class:"btn btn-soft-danger",onClick:q},ce)):w("",!0),e("button",{type:"button",class:"btn btn-success add-btn",onClick:E},[me,J(" Add New")])])])])]),e("div",{class:"card-body",ref_key:"gridContainer",ref:D},null,512)])])]),r.value?(g(),y("div",{key:0,class:m(["modal fade",{show:r.value}]),tabindex:"-1",role:"dialog"},[e("div",ue,[e("div",fe,[e("div",{class:"modal-header bg-light p-3"},[he,e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:N})]),e("form",{class:"tablelist-form",autocomplete:"off",onSubmit:K(L,["prevent"])},[e("div",_e,[e("div",pe,[be,h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a(s).name=l),id:"fname",type:"text",class:m(["form-control",{"is-invalid":a(s).errors.name}]),placeholder:"Enter First Name",required:""},null,2),[[_,a(s).name]]),ve]),e("div",Ce,[ge,h(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a(s).lname=l),id:"lname",type:"text",class:m(["form-control",{"is-invalid":a(s).errors.lname}]),placeholder:"Enter Last Name",required:""},null,2),[[_,a(s).lname]]),e("div",ke,u(a(s).errors.lname),1)]),e("div",xe,[ye,h(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a(s).email=l),id:"email",type:"email",class:m(["form-control",{"is-invalid":a(s).errors.email}]),placeholder:"Enter email"},null,2),[[_,a(s).email]]),e("div",we,u(a(s).errors.email),1)]),e("div",Se,[De,x(n,{defaultCountry:"PH",onPhone:t[3]||(t[3]=l=>S.value=l)}),e("div",Ne,u(a(s).errors.phone),1)]),e("div",Be,[Pe,h(e("textarea",{class:m(["form-control",{"is-invalid":a(s).errors.address}]),"onUpdate:modelValue":t[4]||(t[4]=l=>a(s).address=l),id:"address",rows:"2"},null,2),[[_,a(s).address]]),e("div",Ae,u(a(s).errors.address),1)]),e("div",null,[Le,h(e("textarea",{class:m(["form-control",{"is-invalid":a(s).errors.other_details}]),"onUpdate:modelValue":t[5]||(t[5]=l=>a(s).other_details=l),id:"other_details",rows:"3"},null,2),[[_,a(s).other_details]]),e("div",Te,u(a(s).errors.other_details),1)])]),e("div",Ve,[e("div",Ee,[e("button",{type:"button",class:"btn btn-light",onClick:N},"Close"),a(s).processing?(g(),y("div",Me,Ue)):w("",!0),e("button",je,u(H.value),1)])])],32)])])],2)):w("",!0)]}),_:1})}}});export{Ze as default};
